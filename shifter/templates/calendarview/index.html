<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Shifter - Calendar View</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='calendarview/style.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='icons/fontello-ec1a3ecf/css/animation.css') }}">
        <script src="{{ url_for('static', filename='calendarview/calendarAuth.js') }}" defer></script>
        <script src="{{ url_for('static', filename='calendarview/calendar.js') }}" type="module"></script>
        <script src="{{ url_for('static', filename='calendarview/shifts.js') }}" type="module"></script>
    </head>
    <body>
        <header>
            <h1>Shifter</h1>
            <p>Hello, {{ username }}</p>
            <form action="http://127.0.0.1:5000/auth/logout" method="get">
                <input type="submit" value="Logout" />
            </form>
        </header>
        <section class="content">
            <div class="config-values">
                <div class="custom-select-calendars">
                    <select></select>
                </div>
                <div class="config-connect-btns-wrapper">
                    <button class="google-style" type="button"><i>&#xf1a0</i>Google</button>
                    <button class="outlook-style" type="button"><i>&#xe801</i>Outlook</button>
                </div>
                <button class="confirm-btn" type="button" disabled>Confirm</button>
            </div>
            <div class="calendar-wrapper">
                <div class="calendar">
                    <!-- Display user's Google calendar -->
                    {% if calendar != None %}
                        {% if calendar == "Google" %}
                        <script>document.querySelector(".calendar").setAttribute("id", "google")</script>
                        {% elif calendar == "Outlook" %}
                        <script>document.querySelector(".calendar").setAttribute("id", "outlook")</script>
                        {% endif %}
                    {% else %}
                    <!-- User has no calendar, so these buttons are links to connect to supported calendars -->
                    <div class="connect-btns-wrapper">
                        <button class="calendar-connect-btn google-btn" type="button">Connect To Google Calendar</button>
                        <button class="calendar-connect-btn outlook-btn" type="button">Connect To Outlook Calendar</button>
                    </div>
                    {% if denied != None %}<span id="error">Could not connect to calendar. Click to dismiss.</span>{% endif %}
                    {% endif %}
                </div>
            </div>
            <div class="shift-config">
                <div id="select-shift-view">
                    <button class="create-shift-btn">+ Create a Shift</button>
                    <div class="custom-shift-select">
                        <select title="Select a shift" name="shift" id="shifts-dropdown-list" class="shifts-dropdown-list">

                        </select>
                    </div>
                </div>
                <div id="create-shift-view">
                    <form id="create-shift-form">
                        <label for="name">*Shift name:</label>
                        <input type="text" name="name" id="name" required>

                        <label for="start-time">*Start time:</label>
                        <input type="time" name="start-time" id="start-time" required>
                        
                        <label for="end-time">End time:</label>
                        <input type="time" name="end-time" id="end-time">
                        
                        <input type="submit" value="Create" />
                    </form>
                    <button class="create-shift-go-back-btn" type="button">Go back</button>
                    <div id="create-shift-status">
                        <span class="loading">Creating...</span>
                        <span class="error">Couldn't create the Shift</span>
                    </div>
                </div>
            </div>
        </section>
    </body>
</html>